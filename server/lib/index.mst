<!DOCTYPE HTML>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<style>
		li { margin-bottom: 1em; }
		.time { font-weight: bold }
	</style>
</head>
<body>
	{{ #trace }}
		From 
		<a href="https://www.google.com/maps/place/{{ src.lat }},{{ src.lon }}">{{ src.lat }} {{ src.lon }}</a>
		to
		<a href="https://www.google.com/maps/place/{{ dest.lat }},{{ dest.lon }}">{{ dest.lat }} {{ dest.lon }}</a>
	{{ /trace }}
	<ol>
		{{ #trips }}
			<li>
				{{ route.shortName }} from {{ srcStop.name }}
				<div class="time">
					in {{ srcStop.arrivalTime.minutesUntil }} minutes{{#srcStop.arrivalTime.isScheduled}}*{{/srcStop.arrivalTime.isScheduled}}
				</div>
				<div class="time">
					Arrive at <span class="timestamp">{{ destStop.arrivalTime.timestamp }}</span>{{#destStop.arrivalTime.isScheduled}}*{{/destStop.arrivalTime.isScheduled}}
				</div>
				{{ #trace }}
					Trip ID: <a href="http://api.pugetsound.onebusaway.org/api/where/trip-details/{{ tripId }}.xml?key=TEST">{{ tripId }}</a>
				{{ /trace }}
			</li>
		{{ /trips }}
	</ol>
	<script>
		Array.prototype.forEach.call(document.querySelectorAll(".timestamp"),
			function(node) {
				// Convert to browser local time and format
				var d = new Date(parseInt(node.textContent, 10));
				var minutes = d.getMinutes() + "";

				if (minutes.length === 1) {
					minutes += "0";
				}

				node.textContent = d.getHours() + ":" + minutes;
			});
	</script>

	<p><a href="/where">Not what you wanted?</a></p>

	<p>* Denotes a scheduled time for which no vehicle status is available.</p>

	<p><b>The fine print</b>: Mybuses won't find options that arrive more than
	two hours after departure or that involve more than one route. Results are
	(at best) only as accurate as the data provided by One Bus Away. If this
	software makes you late for work, we'll feel a little bad about it but accept
	no responsibility. This software was produced in a facility that also
	processes wheat, dairy, and peanuts. Offer void where prohibited by law. For
	external use only. Discontinue use and consult a doctor if you develop a rash
	or fever. Do not fold, spindle, or mutilate. Do not taunt Happy Fun Website.
	</p>
</body>
</html>
